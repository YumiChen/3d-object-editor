(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{325:function(e,n,t){Promise.resolve().then(t.bind(t,4118))},4118:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return y}});var r=t(3353),l=t(9599);let i="canvas";var o=t(8149),u=t(1297),d=t(2889);let c=(0,l.createContext)({modelIds:{},addModelId:()=>{},removeModelId:()=>{}}),a=e=>{let{children:n}=e,[t,i]=(0,l.useState)({}),o=(0,l.useCallback)((e,n)=>{i({...t,[e]:n})},[t]),u=(0,l.useCallback)(e=>{let n={...t};delete n[e],i(n)},[t]),d=(0,l.useMemo)(()=>({modelIds:t,addModelId:o,removeModelId:u}),[t,o,u]);return(0,r.jsx)(c.Provider,{value:d,children:n})},s=()=>(0,l.useContext)(c),m=["floor"],v={scene:null,camera:null,controls:null,renderer:null,loader:null},x=(0,l.createContext)(v),h=e=>{let{children:n}=e,t=(0,l.useRef)(!1),[i,c]=(0,l.useState)(v),{addModelId:a}=s();return(0,l.useEffect)(()=>{if(t.current)return;t.current=!0;let e=new o.xsS,n=new o.cPb(75,window.innerWidth/window.innerHeight,.1,1e3),r=new d.q(n,document.body),l=new o.CP7,i=new u.E;e.background=new o.Ilk(5950141),l.setSize(null===(x=window)||void 0===x?void 0:x.innerWidth,null===(h=window)||void 0===h?void 0:h.innerHeight);let s=new o.Mig(16448250),m=new o.Ox3(16777215,.5);e.add(m),e.add(s),n.position.set(0,1,3),n.lookAt(new o.Pa4(0,1,0));let v=new d.q(n,document.body);e.add(v.getObject());var x,h,f=new o.dpR().load("textures/wood.jpg");let w=new o._12(1e3,1e3,10,10),p=new o.vBJ({map:f,side:o.ehD}),b=new o.Kj0(w,p);a("floor",b.uuid),b.rotation.x=-Math.PI/2,e.add(b),c({scene:e,camera:n,controls:r,renderer:l,loader:i})},[a]),(0,r.jsx)(x.Provider,{value:i,children:n})},f=()=>(0,l.useContext)(x);function w(e){let{children:n}=e,{scene:t,camera:o,renderer:u}=f(),d=(0,l.useRef)(!1),c=(0,l.useRef)(0),a=(0,l.useRef)(0);return(0,l.useEffect)(()=>{t&&o&&u&&(window.addEventListener("resize",function(){o&&u&&(o.aspect=window.innerWidth/window.innerHeight,o.updateProjectionMatrix(),u.setSize(window.innerWidth,window.innerHeight))},!1),document.addEventListener("mousedown",function(e){1===e.button&&(d.current=!0)},!1),document.addEventListener("mouseup",function(e){1===e.button&&(d.current=!1)},!1),document.addEventListener("mousemove",function(e){if(d.current){let n=e.clientX-c.current,t=e.clientY-a.current;o&&(o.rotation.y-=.005*n,o.rotation.x-=.005*t,o.rotation.x=Math.max(-Math.PI/2,Math.min(Math.PI/2,o.rotation.x)))}c.current=e.clientX,a.current=e.clientY},!1),document.addEventListener("wheel",function(e){o.position.z+=.01*e.deltaY},!1),u.domElement.setAttribute("id",i),document.body.appendChild(u.domElement),function e(){u&&t&&o&&(requestAnimationFrame(e),u.render(t,o))}())},[t,o,u]),(0,r.jsx)(r.Fragment,{children:n})}var p=t(3762),b=function(e,n){let t;return function(){for(var r=arguments.length,l=Array(r),i=0;i<r;i++)l[i]=arguments[i];clearTimeout(t),t=setTimeout(()=>{e(...l)},n)}};function g(){let e=(0,l.useRef)(null),n=(0,l.useRef)(null),{scene:t,camera:u,renderer:d}=f(),{modelIds:c}=s(),[a,v]=(0,l.useState)(null),x=(0,l.useRef)(null),h=(0,l.useCallback)(r=>{var l,i;if(!r||!t||!u||!d)return;e.current&&(t.remove(e.current),e.current=null),n.current&&n.current.dispose();let c=new p.S([r],u,d.domElement);n.current=c,null===(l=n.current)||void 0===l||l.addEventListener("dragstart",function(e){e.object.rotation.y=0,c.enabled=!0}),null===(i=n.current)||void 0===i||i.addEventListener("dragend",function(){c.enabled=!1}),v(r),e.current=new o.fQA(r,16776960),t.add(e.current)},[t,u,d,v]),w=(0,l.useRef)(()=>{}),g=(0,l.useCallback)(n=>{if((null===(r=n.target)||void 0===r?void 0:r.id)===i&&u&&t&&x.current){var r,l,d,s=new o.FM8;s.x=n.clientX/window.innerWidth*2-1,s.y=-(2*(n.clientY/window.innerHeight))+1;var f=new o.iMs;f.setFromCamera(s,u);var w=null===(l=f.intersectObjects(t.children,!0).find(e=>e.object.isMesh))||void 0===l?void 0:l.object;w&&!m.find(e=>c[e]===(null==w?void 0:w.uuid))?(console.log("Clicked on",w),console.log(e.current&&a&&(null==w?void 0:w.uuid)!==a.uuid),w&&(h(w),x.current.value="#".concat(null===(d=null==w?void 0:w.material)||void 0===d?void 0:d.color.getHexString()))):(e.current&&(t.remove(e.current),e.current=null),v(null))}},[u,t,c,a,h]);(0,l.useEffect)(()=>{document.removeEventListener("click",w.current),w.current=g,document.addEventListener("click",g,!1)},[g]);let j=(0,l.useCallback)(e=>{if(!a||!e.target)return;let n=new o.Ilk(e.target.value),t=new o.Wid({color:n});a.material=t},[a]),C=(0,l.useCallback)(()=>{a&&(a.parent?a.parent.remove(a):null==t||t.remove(a),e.current&&(null==t||t.remove(e.current),e.current=null),v(null))},[t,a,v]),k=(0,l.useCallback)(e=>{var n;let t=parseInt(e.target.value,10);null==a||null===(n=a.scale)||void 0===n||n.set(t,t,t)},[a]);return(0,r.jsxs)("div",{className:"py-1 px-2 flex flex-col bg-neutral-50/20 ".concat(a?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"),children:[(0,r.jsxs)("div",{className:"mr-1",children:[(0,r.jsx)("label",{className:"mr-1",children:"Change Color"}),(0,r.jsx)("input",{type:"color",ref:x,onChange:b(j,500)})]}),(0,r.jsxs)("div",{className:"mr-1",children:[(0,r.jsx)("label",{htmlFor:"scale",className:"mr-1",children:"Scale"}),(0,r.jsx)("input",{type:"range",id:"scale",name:"scale",min:"0.25",max:"5",defaultValue:"1",step:"0.25",onChange:k})]}),(0,r.jsx)("button",{className:"border-2 border-white px-2 py-1 rounded-lg my-1",onClick:C,children:"Remove"})]})}let j={SOFA:"sofa_chair/scene.gltf"};var C=()=>{let{loader:e,scene:n}=f(),{addModelId:t}=s(),i=(0,l.useRef)({SOFA:0}),o=(0,l.useCallback)(r=>{null==e||e.load(j[r],function(e){e.scene.position.set(0,.5,0),null==n||n.add(e.scene),t("".concat(r,"_").concat(i.current[r]),e.scene.uuid),i.current[r]++},void 0,function(e){console.error(e)})},[t,e,n]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:"Add Model"}),(0,r.jsx)("ul",{children:(0,r.jsx)("li",{children:(0,r.jsx)("button",{className:"border-2 border-white px-2 py-1 rounded-lg my-1",onClick:o.bind(null,"SOFA"),children:"Sofa"})})})]})};function k(){let{scene:e}=f(),{modelIds:n,addModelId:t,removeModelId:i}=s(),u=(0,l.useCallback)(r=>{let l=null==e?void 0:e.getObjectByProperty("uuid",n.axesHelper);if(null==r?void 0:r.target.checked){let n=new o.y8_(5);t("axesHelper",n.uuid),null==e||e.add(n)}else l&&(null==e||e.remove(l),i("axesHelper"))},[e,n,t,i]);return(0,r.jsxs)("div",{className:"py-1 px-2 bg-neutral-50/20",children:[(0,r.jsxs)("ul",{className:"list-disc list-inside",children:[(0,r.jsx)("li",{children:"Long-press mouse wheel key to rotate camers"}),(0,r.jsx)("li",{children:"Use mouse wheel to zoom in/ out"}),(0,r.jsx)("li",{children:"Drag items to change position"})]}),(0,r.jsxs)("div",{className:"flex align-middle",children:[(0,r.jsx)("label",{htmlFor:"axesHelper",className:"mr-1",children:"Toggle Axes Helper"}),(0,r.jsx)("input",{id:"axesHelper",name:"axesHelper",type:"checkbox",onChange:u})]}),(0,r.jsx)(C,{})]})}function y(){return(0,r.jsx)(a,{children:(0,r.jsx)(h,{children:(0,r.jsx)(w,{children:(0,r.jsxs)("div",{id:"editArea",className:"fixed top-0 left-0 flex flex-col",children:[(0,r.jsx)(k,{}),(0,r.jsx)(g,{})]})})})})}}},function(e){e.O(0,[602,815,33,569,744],function(){return e(e.s=325)}),_N_E=e.O()}]);